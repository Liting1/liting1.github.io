<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>拖拽</title>
	<style>
		* {
			margin: 0;
			padding: 0;
		}
		.drop {
			width: 100px;
			height: 100px;
			background-color: yellow;
			position: absolute;
			left: 0;
			top: 0;
		}
		.box {
			width: 400px;
			height: 400px;
			background-color: #000;
			position: fixed;
			bottom: 0;
			right: 0;
			color: #fff;
			font-size: 30px;
		}
	</style>
</head>
<body>
	<div class="drop" draggable='true'>拖拽元素</div>
	<div class="box">拖拽元素容器</div>
	<script>
		var drop = document.querySelector('.drop');
		var box = document.querySelector('.box');
		var startX = 0;
		var startY = 0;
		// 开始拖拽
		drop.ondragstart = function(e){
			console.log(e);
			startX = e.offsetX;
			startY = e.offsetY;
		}
		drop.ondrag = function(e){
			console.log(e);
		}
		drop.ondragend = function(e){
			console.log(e);
			this.style.left = e.clientX-startX + 'px';
			this.style.top = e.clientY-startY + 'px';
		}

		document.ondragover = function(e){
			e.preventDefault();
		}
		document.ondrop = function(e) {
			e.preventDefault();
		}

		// 移入目标元素并松开
		box.ondrop = function(e){
			e = e || event;
			e.preventDefault();
			var data = e.dataTransfer.files[0];
			var fr = new FileReader();
			fr.readAsText(data);
			fr.onload = function(){
				var img = new Image();
				img.src = fr.result;
				box.innerHTML = fr.result;
			}
		}
		// 元素移入目标元素
		/*box.ondragover = function(e){
			e = e || event;
			e.preventDefault();
			console.log('dragover',e)
		}
*/

	</script>
</body>
</html>